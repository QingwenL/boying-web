#  了解微服务和Devops

## 微服务

一种软件开发技术- 面向服务的体系结构（SOA）架构样式的一种变体，将应用程序构造为一组松散耦合的服务。在微服务体系结构中，服务是细粒度的，协议是轻量级的。

微服务（或微服务架构）是一种云原生架构方法，其中单个应用程序由许多松散耦合且可独立部署的较小组件或服务组成。这些服务通常

● 有自己的堆栈，包括数据库和数据模型；

● 通过REST API，事件流和消息代理的组合相互通信；

● 和它们是按业务能力组织的，分隔服务的线通常称为有界上下文。

尽管有关微服务的许多讨论都围绕体系结构定义和特征展开，但它们的价值可以通过相当简单的业务和组织收益更普遍地理解：

● 可以更轻松地更新代码。

● 团队可以为不同的组件使用不同的堆栈。

● 组件可以彼此独立地进行缩放，从而减少了因必须缩放整个应用程序而产生的浪费和成本，因为单个功能可能面临过多的负载。

### 可独立部署

微服务的最重要的单一特征可能是，由于服务较小且可独立部署，因此不再需要国会采取行动才能更改应用程序中的一行文字。

微服务向组织承诺了解决方案，以解决因细微变化而引起的内在挫折，这需要花费大量时间。它不需要博士学位。在计算机科学中可以看到或理解更好地促进速度和敏捷性的方法的价值。

但是，速度并不是以这种方式设计服务的唯一价值。一种常见的新兴组织模型是将跨职能的团队聚集在业务问题，服务或产品上。微服务模型非常适合这种趋势，因为它使组织能够围绕一项服务或一组服务创建跨职能的小型团队，并使它们以敏捷的方式运作。

最后，服务的小规模加上清晰的边界和沟通模式，使新团队成员更容易理解代码库并快速做出贡献，这在速度和员工士气方面均具有明显的好处。

## Devops

DevOps（Development和Operations的组合词）是一组过程、方法与系统的统称，用于促进开发（应用程序/软件工程）、技术运营和质量保障（QA）部门之间的沟通、协作与整合。

它是一种重视“软件开发人员（Dev）”和“IT运维技术人员（Ops）”之间沟通合作的文化、运动或惯例。透过自动化“软件交付”和“架构变更”的流程，来使得构建、测试、发布软件能够更加地快捷、频繁和可靠。

它的出现是由于软件行业日益清晰地认识到：为了按时交付软件产品和服务，开发和运维工作必须紧密合作。

### 简介

DevOps 是一个完整的面向IT运维的工作流，以 IT 自动化以及持续集成（CI）、持续部署（CD）为基础，来优化程式开发、测试、系统运维等所有环节。

DevOps一词的来自于Development和Operations的组合，突出重视软件开发人员和运维人员的沟通合作，通过自动化流程来使得软件构建、测试、发布更加快捷、频繁和可靠。

**DevOps是为了填补开发端和运维端之间的信息鸿沟，改善团队之间的协作关系。**不过需要澄清的一点是，从开发到运维，中间还有测试环节**。DevOps其实包含了三个部分：开发、测试和运维。**

DevOps希望做到的是软件产品交付过程中IT工具链的打通，使得各个团队减少时间损耗，更加高效地协同工作。专家们总结出了下面这个DevOps能力图，良好的闭环可以大大增加整体的产出。

### 工具

- 代码管理（SCM）：**GitHub**、GitLab、BitBucket、SubVersion
- 构建工具：**Ant**、Gradle、**maven**
- 自动部署：Capistrano、CodeDeploy
- 持续集成（CI）：Bamboo、Hudson、Jenkins
- 配置管理：Ansible、Chef、Puppet、SaltStack、ScriptRock GuardRail
- 容器：**Docker**、LXC、第三方厂商如AWS
- 编排：Kubernetes、Core、Apache Mesos、DC/OS
- 服务注册与发现：**Zookeeper**、etcd、Consul
- 脚本语言：python、ruby、shell
- 日志管理：ELK、Logentries
- 系统监控：Datadog、Graphite、Icinga、Nagios
- 性能监控：AppDynamics、New Relic、Splunk
- 压力测试：JMeter、Blaze Meter、loader.io
- 预警：PagerDuty、pingdom、厂商自带如AWS SNS
- HTTP加速器：Varnish
- 消息总线：ActiveMQ、SQS
- 应用服务器：Tomcat、JBoss
- Web服务器：Apache、Nginx、IIS
- 数据库：MySQL、Oracle、PostgreSQL等关系型数据库；cassandra、mongoDB、redis等NoSQL数据库
- 项目管理（PM）：Jira、Asana、Taiga、Trello、Basecamp、Pivotal Tracker

# web1.0-web4.0发展历程

## Web1.0

> Web1.0–信息共享。虽然人们为着信息共享已经奋斗了很多年，但直到Web技术的出现并逐步完善之今，信息共享也还远未令人满意。但比起之前的其它技术，如ftp等，自描述性赋予了Web系统强大的生命力，使得Web成为信息共享的第一设施。

## Web2.0

> Web2.0–信息共建。直到Web1.0时代，信息也还都是单向的，由话语权集团发出。普通百姓只有听的份儿，而Web2.0则赋予了普通百姓一样的话语权，意识表达空前活跃，特别是在意识形态禁锢的社会里。如此必然导致网络信息的泛滥：陷阱病毒成灾，如今杀毒软件倒成了计算机第一应用了；垃圾信息遍野，如果找到适合于自己的信息，就成了网民的需要，因此搜索引擎崛起。但搜索引擎并不能杜绝陷阱病毒，也不能区分垃圾信息，更不能系统化Web信息，因此技术探索就成为必然。

## Web3.0

> Web3.0–知识传承。计算机是人类的意识外化，其每一点进步，都必然聚合了更多人的智慧。集聚人类智慧为人类共享，是计算机科学技术的内在本质。Web
> 3.0里，我们不仅要消灭陷阱病毒，踢出垃圾信息，更要有序化系统化整个Web世界，以全Web资源为基础建设出一座“Web图书馆”来，实现人类自身的“知识传承”。我的知识界系统产品，就是这样一个实现人类自身知识传承的Web3.0系统。即时性是其主要特性，因此即时通信（iM）系统是知识界的技术平台。

## Web4.0

> Web4.0–知识分配。在Web3.0里，人类可以随心所欲地获取各种知识，当然这些知识都是先人们即时贡献出来的。这里的即时性，指的就是学堂里老师教学生的即时性。从Web3.0开始，网络就具备了即时特性。但人们并不知道自己应该获取怎样的知识，即自己适合于学习哪些知识。比如一个10岁的孩子想在20岁的时候成为核物理学家，那么他应该怎样学习知识呢？这些问题就是Web4.0的核心–知识分配系统所要解决的问题了。





# 云平台架构

云平台架构概述：

   首先应明白建立云平台的目的，与传统的服务器相比，云平台可以将物理资源虚拟化为虚拟机资源池，灵活调用软硬件资源，实现对用户的按需访问。而且在运行过程中根据用户并发量不同，实时迁移虚拟机资源，一方面保证提供高质量服务，另一方面最小化资源成本，提高CPU、内存等利用率。

 

该架构主要分为4层，从底层到上层分别是资源层、虚拟层、中间件层、应用层。以下从底到上分别说明各层的构造和作用。

 

资源层：由服务器集群组成。传统服务器要想提供高质量服务，需要性能特别好的服务器（内存高，CPU快，磁盘空间大等），价格昂贵。而服务器集群可以使用以前性能不太好的服务器，利用分布式处理技术，依然可以提供可靠服务，节省费用。

 

虚拟层：有了物理机集群后，我们需要在物理机上建立虚拟机。建立虚拟机的目的是为了最小化资源成本（最大化资源利用率）。试想一下某台物理机有16G内存，当某段时间连续有小任务量的应用需要处理时，物理机的内存利用率会很低，所以为最大化资源利用率，可以在物理机上独立开辟几个虚拟机，每台虚拟机相当于一个小型服务器，依然可以处理应用请求。我们采用KVM来给每一台虚拟机分配适量的内存、CPU、网络带宽和磁盘，形成虚拟机池。(KVM就是虚拟机监控器hypervisor，可以给虚拟机分配资源，当然也可以开关虚拟机。同样还有XEN和OVM)。

 

中间件层：这层应该是云平台的核心层，主要功能为：对虚拟机池资源状态进行监测、预警、优化决策。①资源监测：实时监测当前各台虚拟机CPU、内存等使用情况，当然也监测用户应用请求，以便根据应用规模大小进行决策。②预警：防患于未然，根据当前虚拟机资源使用情况预测下一秒用户请求量，以便做出相应资源调整，防止宕机。比如CPU使用率上限为70%，所以当预测下一秒达到该触发点时，应有相应响应。当然，触发阈值应该有更科学的设定。③优化决策：预警之后，虚拟机要进行资源调度(迁移或伸缩)，采用何种调度策略，才能保证服务和资源利用率是研究重点。由于该层需要对应用进行响应处理，所以需要在虚拟机上搭建操作系统，文件存储系统，以及服务器，当然最应该有负载均衡系统Nginx，其实现中间件层功能，相当于网络中的路由器不处理数据，只进行数据转发，数据处理交有虚拟机上的tomcat服务器执行。（也相当于hadoop中的Namenode，其他虚拟机相当于datanode）。

 

应用层：给用户提供可视化界面，应用若为存储：比如百度云会给用户提供交互界面，建立文件夹，进行数据存储，在线播放视频等界面，供用户选择操作。应用若为租用服务器：界面应该有租用的服务器资源状态。


# 过程工具

## 对图2.1的理解
图2.1即软件工程层次图，是在定义的基础上对软件工程的抽象。由于任何工程方法（包括软件工程）必须构建在质量承诺的基础之上，因此支持软件工程的根基在于质量关注点。为了提高软件质量，作为基础的过程层将各个技术层次结合在一起，使得合理、及时地开发计算机软件称为可能。方法则为构建软件提供技术上的解决方法，软件工程工具则是方法技术的工具化，为过程和方法提供自动化或半自动化的支持。在软件开发过程中用到的各种各样的工具统称为计算机辅助软件工程(CASE)。

## 过程工具

- 软件过程建模工具：igrafx process tool，进度分析器和仿真工具，帮助组织理解和改善流程。
- 补充


# 使用XP或Scrum开发的项目

补充

# 模式

模式可以在任何抽象级别上定义。在某些情况下，模式可以用来描述与完整流程模型（process model）相关联的问题和解决方案。在其他情况下，模式可以用来描述与框架活动（framework activity）中的一个操作相关的问题和解决方案。


- 规划模型Planning pattern：要求客户与软件工程师建立协作沟通；成功完成了多个任务模式，且通信模式已经发生；满足已知项目范围、基本业务需求和项目约束条件。

- 补充

# 分析SafeHome家居安全功能的用例图

![img/SafeHomeUsecase.png]

## 参与者
- Homeowner房主（即用户）
- Systemadministrator系统管理员（很可能就是房主，但扮演不同的角色）
- sensors传感器（附属于系统的设备）

## 用例
- 安装/解除系统
- 通过英特网访问系统
- 响应报警事件
- 遇到错误条件
- 重新配置传感器以及相关的系统特性






